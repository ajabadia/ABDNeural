# NEURONiK: Master Development Roadmap & Specification

Este documento sirve como la gu√≠a t√©cnica y filos√≥fica para el desarrollo de NEURONiK, un instrumento de res√≠ntesis inspirado en la tecnolog√≠a de modelos neurales (Hartmann Neuron), dise√±ado para alta eficiencia en m√∫ltiples plataformas (PC, Mac, Linux, RPi).

---

## üü¢ FASE 0-8: FUNDAMENTOS Y S√çNTESIS [COMPLETADO]
*Objetivo: Establecer una base de c√≥digo robusta y un motor de s√≠ntesis expresivo.*

- [x] **Arquitectura y UI**: Sistema de pesta√±as, abstracci√≥n de par√°metros y optimizaci√≥n del hilo de audio.
- [x] **Motor de Modelos Espectrales**: Migraci√≥n a un sistema de s√≠ntesis basado en modelos de 64 parciales, con capacidad de morphing lineal (A/B).
- [x] **Escultura de Materia Sonora**: Implementaci√≥n de los par√°metros `Inharmonicity` y `Roughness` para la transformaci√≥n del timbre.

---

## üü¢ FASE 10: NAVEGACI√ìN AVANZADA [COMPLETADO]
*Objetivo: Implementar un sistema de morphing 2D para un control t√≠mbrico superior.*

- [x] **Tarea 10.1: Neural Pad (Componente X/Y)**: Se ha reemplazado el morphing lineal por un pad X/Y que permite la mezcla entre cuatro modelos espectrales (A, B, C, D).
- [x] **Tarea 10.2 (Parcial): Bugs Cr√≠ticos Solucionados**: Se ha corregido el bug de la nota MIDI fija y se ha eliminado el visualizador duplicado de la UI.

---

## üü¢ FASE 14: REFINAMIENTO DE USABILIDAD (UI/UX) [COMPLETADO]
*Objetivo: Mejorar el flujo de trabajo y la claridad de la interfaz bas√°ndose en la experiencia de uso.*

- [x] **Tarea 14.1: Reorganizaci√≥n del Panel `RESONATOR`**: Se han movido los controles de `Inharmonicity` y `Roughness` desde el `DASHBOARD` al `RESONATOR` para agrupar todos los controles de escultura de timbre junto al XYPad.
- [x] **Tarea 14.2: Visualizador Espectral Global**: 
    -   Se ha movido el `SpectralVisualizer` a la cabecera de la UI, siempre visible en la mitad derecha.
    -   Se ha implementado una escala de potencia (gamma) para mejorar la visibilidad de arm√≥nicos de baja amplitud.
- [x] **Tarea 14.3: Bot√≥n de Aleatorizaci√≥n ("Randomize")**: A√±adido bot√≥n "RANDOM" que genera timbres musicales coherentes y notifica cambios al host.

---

## üü¢ FASE 15: MODULACI√ìN AVANZADA (LFOs) [COMPLETADO]
*Objetivo: Dotar a NEURONiK de LFOs como fuentes de modulaci√≥n flexibles.*

- [x] **Tarea 15.1: Motor de LFO en DSP (B√°sico)**: Creada la clase `LFO` con formas de onda est√°ndar, `Rate` (con DAW Sync) y `Depth`.
- [x] **Tarea 15.2: Matriz de Modulaci√≥n (Simple)**: Dise√±ado e implementado el sistema que conecta las fuentes (LFOs) con los destinos (par√°metros) en `NEURONiKProcessor`.
- [x] **Tarea 15.3: Interfaz de Usuario para Modulaci√≥n**: Creada la nueva pesta√±a `LFO/MOD` en la UI para controlar los LFOs y la matriz de modulaci√≥n.

---

## üü¢ FASE 12: GESTI√ìN Y CONTROL TOTAL [COMPLETADO]
*Objetivo: Dotar a NEURONiK de un sistema de gesti√≥n de sonidos profesional y control MIDI completo.*

### Tarea 12.1: Sistema de Presets (.neuronikpreset) [COMPLETADO]
- [x] **Especificaci√≥n**: Implementar la capacidad de guardar y cargar el estado completo del sintetizador.
- [x] **Backend**: Clase `PresetManager` implementada con persistencia en XML.
- [x] **UI B√°sica**: Implementado `ComboBox` (desplegable) en el panel `Parameters` para selecci√≥n r√°pida, reemplazando los botones anticuados.
- [x] **UI Avanzada**: Creada pesta√±a "BROWSER" con 3 columnas (Bank, Preset, Info) y funcionalidad de b√∫squeda, inspirada en sintetizadores modernos como Osirus.

### Tarea 12.2: Carga de Modelos Espectrales (.neuronikmodel) [COMPLETADO]
- [x] **UI**: A√±adir cuatro botones ("Load A", "Load B", etc.) en el `OscillatorPanel`.
- [x] **L√≥gica**: Implementar la carga de archivos JSON.
- [x] **Soporte Headless**: El preset ahora guarda y restaura las rutas a los archivos `.neuronikmodel` utilizados autom√°ticamente.

### Tarea 12.3: Mapeo de MIDI CC y Controles Est√°ndar
- [x] **Sub-tarea 12.3.1 (Hard-coded)**: Implementar Pitch Bend, Sustain Pedal, Mod Wheel, Main Volume.
- [x] **Sub-tarea 12.3.2 (MIDI Learn) [UI IMPLEMENTADA]**: Implementar la l√≥gica de mapeo din√°mico, con gesti√≥n desde la UI de escritorio (men√∫ contextual) y desde la UI headless (doble pulsaci√≥n / pulsaci√≥n larga).
- [x] **Sub-tarea 12.3.3 (MIDI Thru) [COMPLETADO]**: Implementado par√°metro global y l√≥gica de reenv√≠o en `processBlock`.
- [x] **Sub-tarea 12.3.4 (Canal MIDI) [UI COMPLETADA]**: A√±adir selector de canal MIDI de entrada (Omni, 1-16). Correcci√≥n de bug cr√≠tico en filtrado de canales (Float vs Int).
- [x] **Sub-tarea 12.3.8 (Tempo Standalone / Interno)**: Implementado par√°metro `masterBPM` que act√∫a como fuente de tiempo cuando no hay host DAW/MIDI Clock. A√±adido control visual en la pesta√±a GENERAL.
- [x] **Sub-tarea 12.3.5 (Pitch Bend como Modulador)**: Implementado Pitch Bend y Mod Wheel como fuentes en la matriz de modulaci√≥n.
- [x] **Sub-tarea 12.3.6 (Correcci√≥n de Sincron√≠a LFO)**: Corregido bug donde los LFOs avanzaban solo 1 muestra por bloque de audio. Implementada l√≥gica de avance por bloques y mapeo de divisiones r√≠tmicas.
- [x] **Sub-tarea 12.3.7 (Escalado de Modulaci√≥n)**: Corregido bug de escalado en la matriz donde los valores modulados no respetaban el rango real del par√°metro destino (especialmente cr√≠tico en Filtro y Envolventes).
- [x] **Sub-tarea 12.3.9 (Delay Sync)**: Implementada sincronizaci√≥n del Delay con el BPM (interno o del host) con selector de divisiones r√≠tmicas.

---

## üü¢ FASE 16: REFINAMIENTO DE SONIDO Y USABILIDAD [COMPLETADO]
*Objetivo: Ajustar par√°metros de s√≠ntesis y mejorar la claridad de la interfaz bas√°ndose en la experiencia de uso.*

- [x] **Tarea 16.1: Ajuste del Par√°metro `Roughness`**: Reducir el rango m√°ximo del par√°metro `Roughness` a la mitad (ej. de 1.0 a 0.5) para que su efecto sea m√°s musical y se controle la generaci√≥n de ruido excesivo.
- [x] **Tarea 16.2: Visualizaci√≥n de Nombres en XY Pad**: Mostrar el nombre del modelo cargado en cada una de las cuatro esquinas (A, B, C, D) del XY Pad en la pesta√±a `RESONATOR`. Esto proporcionar√° una referencia visual clara de hacia d√≥nde se est√° realizando el morphing.
- [x] **Tarea 16.3: Robustez de Audio y Polifon√≠a**: Implementada opci√≥n de l√≠mite de voces (1-8 voces) en el men√∫ "Edit" para gesti√≥n de recursos. Optimizado generador de aleatoriedad (Xorshift32) para eliminar cracks en alta polifon√≠a. Solucionados clicks de re-disparo en modo mono.

---

## üü¢ FASE 17: GESTI√ìN DE PRESETS AVANZADA [COMPLETADO]
*Objetivo: Mejorar la gesti√≥n y manipulaci√≥n de presets.*

- [x] **Tarea 17.1: Copiar/Pegar Par√°metros de Patch**: Implementada funcionalidad v√≠a Portapapeles del sistema en el men√∫ "Edit".
- [x] **Tarea 17.2: Gestor de Presets Avanzado**: Creada pesta√±a "BROWSER" y selector r√°pido en "GENERAL" para gesti√≥n completa.
- [x] **Tarea 17.3: Portabilidad Total (Embedded Models)**: Los presets (`.neuronikpreset`) ahora serializan internamente los datos de los modelos espectrales usados. Esto elimina la dependencia de archivos externos al compartir patches.

---

## üü¢ FASE 18: NEURONiK MODEL MAKER [COMPLETADO]
*Objetivo: Permitir al usuario crear sus propios timbres (.neuronikmodel) a partir de muestras de audio.*

- [x] **Tarea 18.1: Infraestructura de Librer√≠a Compartida**: Separar la definici√≥n de `SpectralModel` en una carpeta `Common`.
- [x] **Tarea 18.2: Aplicaci√≥n Model Maker (Standalone)**: Crear el proyecto de aplicaci√≥n de escritorio JUCE independiente.
- [x] **Tarea 18.3: An√°lisis FFT y Extracci√≥n de Arm√≥nicos**: Implementar carga de audio y algoritmo de detecci√≥n de picos espectrales para los 64 parciales.
- [x] **Tarea 18.4: Exportaci√≥n de Modelos**: Guardar el resultado en formato JSON compatible con NEURONiK.

## üü¢ FASE 18.5: REFINAMIENTO DE DETECCI√ìN DE PITCH [COMPLETADO]
*Objetivo: Mejorar la precisi√≥n del an√°lisis espectral para la creaci√≥n de modelos.*

- [x] **Tarea 18.5.1: Algoritmo HPS (Harmonic Product Spectrum)**: Implementado para una detecci√≥n robusta de la frecuencia fundamental.
- [x] **Tarea 18.5.2: UI de Confirmaci√≥n**: A√±adido display de frecuencia detectada y campo de edici√≥n manual para correcciones del usuario antes del an√°lisis.
- [x] **Tarea 18.5.3: Integraci√≥n**: El an√°lisis de arm√≥nicos ahora usa la frecuencia confirmada (detectada o manual) para la extracci√≥n precisa de parciales.

---

## üü¢ FASE 19: ESCULTURA ESPECTRAL AVANZADA [COMPLETADO & VERIFICADO]
*Objetivo: Implementar la l√≥gica DSP para los par√°metros "Legacy" ya definidos en la UI.*

- [x] **Tarea 19.1: Parity (Odd/Even Balance)**: Control de balance entre arm√≥nicos pares e impares.
- [x] **Tarea 19.2: Spectral Shift**: Multiplicador de frecuencia para desplazamiento de formantes.
- [x] **Tarea 19.3: Harmonic Roll-off**: Control de ca√≠da de amplitud de arm√≥nicos superiores (Brillantez).
- [x] **Tarea 19.4: Integraci√≥n en ModMatrix**: Los 3 par√°metros ahora son destinos de modulaci√≥n.

- [x] **Tarea 19.1: L√≥gica de Parity (Odd/Even)**: Ajustada la ganancia de parciales impares/pares din√°micamente seg√∫n el balance.
- [x] **Tarea 19.2: Spectral Shift**: Desplazamiento del espectro de arm√≥nicos por encima o debajo de su frecuencia fundamental (estilo formante).
- [x] **Tarea 19.3: Harmonic Roll-off**: Implementada la pendiente de ca√≠da global (exponencial) para suavizar o endurecer el timbre.

---

## üü¢ FASE 20: EXPANSI√ìN DE EFECTOS (FX 2.0) [COMPLETADO]
*Objetivo: A√±adir profundidad espacial y car√°cter al sonido.*

- [x] **Tarea 20.1: Reverb de Alta Calidad**: Implementado algoritmo de reverb (juce::Reverb) con controles de Size, Damp, Width y Mix.
- [x] **Tarea 20.2: Chorus Est√©reo**: Implementado chorus de tres voces con modulaci√≥n LFO interna.
- [x] **Tarea 20.3: Panel de Control de Efectos**: Creado `FXPanel` dedicado con sliders de cristal y visualizaci√≥n de estado.

---

## üü¢ FASE 21: EXPANSI√ìN DE CONTROL MIDI [COMPLETADO]
*Objetivo: Mejorar la capacidad interpretativa y control externo del instrumento.*

- [x] **Tarea 21.1: Curvas de Velocidad y Aftertouch**: Mapeo de presi√≥n y velocidad (Linear, Soft, Hard) a par√°metros de s√≠ntesis.
- [x] **Tarea 21.2: Mapeo MIDI Est√°ndar y Gesti√≥n LCD**: 
    -   [x] Mapeo CC din√°mico con persistencia y resoluci√≥n de conflictos.
    -   [x] Men√∫ "MIDI CONTROL" en LCD para asignaci√≥n de CCs y reset de f√°brica.
    -   [x] Soporte para Channel Pressure como fuente de modulaci√≥n.
- [x] **Tarea 21.3: Tabla de Especificaciones MIDI**:
    -   [x] Implementar di√°logo de ayuda con la tabla de implementaci√≥n MIDI de f√°brica.
    -   [x] A√±adir acceso desde la barra de men√∫ superior (Help -> MIDI Specs).

---

## üü¢ FASE 20.8: AUDIO RECORDING & ROOT NOTE (MODEL MAKER) [COMPLETADO]
*Objetivo: Facilitar la creaci√≥n de modelos permitiendo grabaci√≥n directa y gesti√≥n precisa de la nota ra√≠z.*

- [x] **Tarea 20.8.1: Grabaci√≥n de Audio**:
    -   [x] Habilitaci√≥n de entradas de audio en `deviceManager`.
    -   [x] Implementaci√≥n de l√≥gica de grabaci√≥n circular en buffer temporal.
    -   [x] Bot√≥n "REC" din√°mico con estados de grabaci√≥n/parada.
- [x] **Tarea 20.8.2: Selecci√≥n de Nota Ra√≠z Dividida**:
    -   [x] Reemplazo de selector √∫nico por selectores independientes de Nota y Octava.
    -   [x] Modo "Auto" por defecto para sincronizaci√≥n con detecci√≥n de pitch.
- [x] **Tarea 20.8.3: Sincronizaci√≥n y Validaci√≥n de Pitch**:
    -   [x] Detecci√≥n autom√°tica de pitch tras carga/grabaci√≥n de audio.
    -   [x] L√≥gica de discrepancia: aviso al usuario si la nota seleccionada var√≠a > 1 semitono del pitch detectado.
    -   [x] Refactorizaci√≥n de proceso de an√°lisis para soportar di√°logos as√≠ncronos.

---

## üü¢ FASE 22: MEJORA DE ALEATORIZACI√ìN [COMPLETADO]
*Objetivo: Dar m√°s control sobre el motor de Randomizaci√≥n.*

- [x] **Tarea 22.1: Randomization Strength**: A√±adir un slider ("STRENGTH") que controle cu√°nto se desv√≠an los par√°metros de su valor actual al pulsar RANDOM.
- [x] **Tarea 22.2: Bloqueo de Par√°metros (Freeze)**: Permitir "bloquear" ciertos m√≥dulos (ej. Envolventes) para que no sean afectados por la aleatorizaci√≥n.

---

## üü¢ FASE 23: FEEDBACK VISUAL Y ANIMACI√ìN [COMPLETADO]
*Objetivo: Hacer que la interfaz refleje el estado din√°mico del motor de s√≠ntesis.*

- [x] **Tarea 23.1: Animaci√≥n de Controles Modulados**: Los Knobs muestran un anillo cian que se mueve en tiempo real reflejando la modulaci√≥n.
- [x] **Tarea 23.2: Animaci√≥n del Neural Pad**: Representaci√≥n visual del movimiento del punto de morphing y "ghost cursor" para indicar el objetivo.
- [x] **Tarea 23.3: Visualizaci√≥n de Envolventes**: Gr√°fico ADSR interactivo que se ilumina con la intensidad de la envolvente de las voces activas.
- [x] **Tarea 23.4: Refinamiento "Knobs 2.0" [COMPLETADO]**: 
    -   Mejorada la est√©tica de los anillos de modulaci√≥n.
    -   Limitada la visualizaci√≥n a **2 decimales** en todos los controles para mayor legibilidad.
    -   A√±adida profundidad visual y unificaci√≥n de colores.

---

## üü¢ FASE 24: REDISE√ëO DE INTERFAZ DE EFECTOS [COMPLETADO]
*Objetivo: Organizar y limpiar la pesta√±a FX para mejorar la usabilidad.*

- [x] **Tarea 24.1: Reorganizaci√≥n FX [COMPLETADO]**: 
    -   Redise√±ado `FXPanel` agrupando controles en m√≥dulos visuales "GlassBox".
    -   Reorganizaci√≥n vertical de los selectores de Delay (Sync/Div) para maximizar el ancho de los desplegables.
    -   Aumento de tama√±o del knob de `Drive` para coherencia visual con el resto de efectos.
- [x] **Tarea 24.2: Animaci√≥n FX [COMPLETADO]**: Aplicado el sistema de feedback visual (anillos de modulaci√≥n) a todos los efectos.
- [x] **Tarea 24.3: Indicadores de Actividad**: A√±adidos LEDs virtuales que indican si un efecto est√° activo o procesando se√±al.

---

## üü¢ FASE 25: ENVOLVENTE DE FILTRO Y REFINAMIENTO BROWSER [COMPLETADO]
*Objetivo: Expandir las capacidades de s√≠ntesis y perfeccionar la est√©tica del sistema de navegaci√≥n.*

- [x] **Tarea 25.1: Envolvente de Filtro ADSR**:
    -   Implementaci√≥n DSP en cada voz y l√≥gica de seguimiento de picos (Peak Tracking) para la UI.
    -   Creaci√≥n de la pesta√±a `FILTER/ENV` con visualizador din√°mico.
- [x] **Tarea 25.2: Overhaul Est√©tico del Browser**:
    -   Migraci√≥n completa al esquema de colores NEURONiK (Glass Dark).
    -   Implementaci√≥n de gradientes de cristaler√≠a en las selecciones de bancos y presets.
    -   Unificaci√≥n de fuentes y bordes neon de baja intensidad.

---

## üü¢ FASE 13: INTERFAZ DE HARDWARE VIRTUAL (Pantalla LCD) [COMPLETADO]
*Objetivo: Reemplazar el t√≠tulo est√°tico por una pantalla LCD informativa y funcional, clave para el modo headless.*

- [x] **Especificaci√≥n de Hardware**: La pantalla LCD ser√° de tipo 16x2 (16 caracteres, 2 filas) compatible con est√°ndares industriales.
- [x] **Tarea 13.1: Emulaci√≥n Matriz LCD**: Implementaci√≥n del componente `LcdDisplay` con efectos de persistencia y scrolling.
- [x] **Tarea 13.2: LcdMenuManager**: State machine para navegaci√≥n jer√°rquica (Idle, Menu, Edit).
- [x] **Tarea 13.3: Hardware D-Pad**: Reemplazo del encoder por botones f√≠sicos (`< > ^ v`) con l√≥gica de "Turbo Acceleration".
- [x] **Tarea 13.4: CustomButton Component**: Unificaci√≥n est√©tica de botones bajo el esquema "Neural Glass".
- [x] **Tarea 13.5: Mover T√≠tulo a Pesta√±a GENERAL**: Reubicaci√≥n de branding para optimizar el √°rea de cabecera.

### Referencia de Men√∫s para Hardware (Estilo Vintage)
Esta secci√≥n recopila informaci√≥n sobre estructuras de men√∫ y valores t√≠picos de sintetizadores hardware para guiar el desarrollo de la interfaz LCD.

```
Estructura General
text
GLOBAL
‚îú‚îÄ‚îÄ TUNE > 440 | Master Tune (A4=440Hz ¬±100 cents) [web:6]
‚îú‚îÄ‚îÄ TRANS > 0 | Transpose (-12..+12 semitones) [web:6]
‚îî‚îÄ‚îÄ VOL > 100 | Master Volume (0-127) [web:9]

PRESET
‚îú‚îÄ‚îÄ BANK > A1 | Bank Select (A-H, 1-8) [web:6]
‚îú‚îÄ‚îÄ NAME > BASS | Preset Name (8-16 chars, ej. BASS, LEAD1) [web:6]
‚îî‚îÄ‚îÄ LEV > 100 | Preset Level (0-127) [web:9]
MIDI Configuraci√≥n
text
MIDI
‚îú‚îÄ‚îÄ CH > 1 | Channel (1-16, OMNI) [web:9]
‚îú‚îÄ‚îÄ OUT > ON | Output (ON/OFF) [web:6]
‚îú‚îÄ‚îÄ THRU > ON | Thru (ON/OFF) [web:6]
‚îú‚îÄ‚îÄ PROG > ON | Program Change (ON/OFF) [web:9]
‚îî‚îÄ‚îÄ BEND > 2 | Bend Range (0-12 semitones) [web:6]
Efectos y Controles
text
EFFECT
‚îú‚îÄ‚îÄ PORT > 0 | Portamento Time (0-99) [web:6]
‚îú‚îÄ‚îÄ GLID > 12 | Glide Note (¬±12 semitones) [web:6]
‚îú‚îÄ‚îÄ CHOR > ON | Chorus (ON/OFF) [web:6]
‚îú‚îÄ‚îÄ MOD.W > 50 | Mod Wheel Depth (0-99) [web:6]
‚îú‚îÄ‚îÄ MOD.A > 50 | Mod Aftertouch Depth (0-99) [web:6]
‚îî‚îÄ‚îÄ AMP.A > 15 | Amp Aftertouch Range (0-15) [web:6]

INST
‚îú‚îÄ‚îÄ OCT > 0 | Octave Shift (-2..+2) [web:6]
‚îú‚îÄ‚îÄ DETU > 5 | Detune (0-50 cents) [web:6]
‚îú‚îÄ‚îÄ VEL > 7 | Velocity Sens (0-7, LINE1/LINE2) [web:6]
‚îî‚îÄ‚îÄ BEND > ¬±2 | Bender Range (¬±2, ¬±5, ¬±7, ¬±12) [web:18]
Envolventes (Scroll P√°ginas)
text
ENV.DCO1 (Pitch Env LINE1)
‚îú‚îÄ‚îÄ STEP1 > R99 L99 | Rate1/Level1 (0-99) [web:6]
‚îú‚îÄ‚îÄ SUS > 3 | Sustain Point (1-8) [web:6]
‚îî‚îÄ‚îÄ END > 0 | End Point (0-99) [web:6]

ENV.DCW1 (Timbre Env LINE1)
‚îú‚îÄ‚îÄ STEP1 > R50 L80 | Rate1/Level1 (0-99) [web:6]
‚îî‚îÄ‚îÄ KF > ON | Key Follow (ON/OFF) [web:6]
Valores t√≠picos en LCD: Abviaturas como "TUNE=440", scroll con PAGE UP/DOWN para subscreens; n√∫meros 0-99 comunes por resoluci√≥n 7-bit.  //// Par√°metros Globales
TUNE: Master tuning (A=440Hz ¬±50 cents)

TRANS: Transpose (-12 a +12 semitonos)

VOL: Master volume (0-127)

OCT: Octave shift (-2 a +2)

PORT: Portamento time (0-99 ms)

MIDI y Controles
CH: MIDI channel (1-16, OMNI)

OUT: MIDI out (ON/OFF)

THRU: MIDI thru (ON/OFF)

BEND: Pitch bend range (¬±2, ¬±5, ¬±7, ¬±12)

VEL: Velocity sensitivity (0-7, LINEAR)

Envolventes y Osciladores
ATT: Attack time (0-99)

DEC: Decay time (0-99)

SUS: Sustain level (0-99)

REL: Release time (0-99)

DETN: Detune (0-50 cents)

DCW: DCW level (0-99)

Efectos y Modulaci√≥n
CHOR: Chorus depth (0-99, ON/OFF)

MOD: Modulation depth (0-99)

LFO.R: LFO rate (0-99)

LFO.S: LFO shape (TRI, SAW, SQR)

ENV: Envelope select (DCO1, DCW1, DCA)

Estos valores se mostraban en formato "PARAM=VAL" con scroll para subs, adaptados a l√≠mites de LCD vintage.  //// Los sintetizadores de los 80/90 expand√≠an sus LCD con m√°s par√°metros detallados en subscreens, mostrando valores num√©ricos precisos y opciones abreviadas para envelopes, LFO y efectos. Aqu√≠ va una ampliaci√≥n con m√°s ejemplos reales de Casio CZ, DX7 y similares, incluyendo rangos completos.

Envolventes Detalladas
text
ENV.DCO (Pitch Envelope)
‚îú‚îÄ‚îÄ RATE1 > 0-99 | Attack rate
‚îú‚îÄ‚îÄ LEVEL1 > 0-99 | Peak level
‚îú‚îÄ‚îÄ RATE2 > 0-99 | Decay rate
‚îú‚îÄ‚îÄ RATE3 > 0-99 | Sustain rate
‚îú‚îÄ‚îÄ RATE4 > 0-99 | Release rate
‚îî‚îÄ‚îÄ KEYF > ON/OFF | Key follow

ENV.DCW (Wave Envelope)
‚îú‚îÄ‚îÄ STEP1 > R99 L99 | Rate/Level step 1 (8 steps)
‚îú‚îÄ‚îÄ SUSPT > 1-8 | Sustain step
‚îî‚îÄ‚îÄ KFS > -2..+2 | Key scale (-2 a +2)
LFO y Modulaci√≥n
text
LFO
‚îú‚îÄ‚îÄ WAVE > TRI,SAW,SQR,RND | Waveform (Triangle, Saw, Square, Random)
‚îú‚îÄ‚îÄ RATE > 0-99 | Speed (0=slow, 99=fast)
‚îú‚îÄ‚îÄ DLY > 0-99 | Delay time
‚îú‚îÄ‚îÄ PMD > 0-99 | Pitch mod depth
‚îú‚îÄ‚îÄ AMD > 0-99 | Amp mod depth
‚îî‚îÄ‚îÄ SYNC > ON/OFF | Key sync
Valores t√≠picos: PMD=30 para vibrato sutil; RATE=50 para tremolo medio.


Filtros y Amplificador
text
FILTER
‚îú‚îÄ‚îÄ FC > 0-99 | Cutoff frequency
‚îú‚îÄ‚îÄ RES > 0-99 | Resonance (self-osc ~99)
‚îú‚îÄ‚îÄ EG.INT > -50..+50 | Envelope intensity
‚îî‚îÄ‚îÄ KEYF > 0-2 | Keyboard track (0=off,1=normal,2=wide)

DCA (Amp)
‚îú‚îÄ‚îÄ LEVEL > 0-99
‚îî‚îÄ‚îÄ VEL > 0-7 (LINEAR1-2,FIXED)
Efectos Comunes
CHORUS: DEP=0-15, SPD=0-15, DL=0-15 (Depth, Speed, Delay)

REVERB: TIME=0-99, LEVEL=0-99 (raro en 80s portables)

NOISE: LEVEL=0-99, TYPE=WHIT/PINK

VELO CURVES: LINE1, LINE2, EXP1-3 (DX7 style)


Valores MIDI Expandidos
text
MIDI
‚îú‚îÄ‚îÄ LOCAL > ON/OFF | Local control
‚îú‚îÄ‚îÄ PROGCH > 1-16 | Program change ch
‚îú‚îÄ‚îÄ SYSX > ON/OFF | SysEx transmit
‚îú‚îÄ‚îÄ CLK > INT/EXT | Clock source (Internal/External)
‚îî‚îÄ‚îÄ PRIOR > HIGH/LOW | Priority (Poly/Mono)
Pantallas como "MIDI CH=10 LOC=ON" o scroll "PROG=ON THRU=OFF"   ////  Mixer y Niveles
text
MIXER
‚îú‚îÄ‚îÄ DCO1 > 0-99 | Osc 1 level
‚îú‚îÄ‚îÄ DCO2 > 0-99 | Osc 2 level  
‚îú‚îÄ‚îÄ NOIS > 0-99 | Noise level
‚îú‚îÄ‚îÄ EXT > 0-99 | External input
‚îî‚îÄ‚îÄ BAL > L50-R50 | Stereo balance
Key Scaling y Velocity
text
KEY SCALE
‚îú‚îÄ‚îÄ BREAK > C3 | Break point (C-1 a G9)
‚îú‚îÄ‚îÄ L.SLOPE > -10..+10 | Left slope
‚îú‚îÄ‚îÄ R.SLOPE > -10..+10 | Right slope
‚îî‚îÄ‚îÄ L.CURV > -7..+7 | Left curve

VELOCURV > LIN1,LIN2,EXP1-3 | Velocity curve [web:16]
Arpeggiator y Secuencer
text
ARPEGG
‚îú‚îÄ‚îÄ MODE > UP,DN,UPDN,RND | Up/Down/UpDown/Random
‚îú‚îÄ‚îÄ RANGE > 1-4 | Octave range
‚îú‚îÄ‚îÄ BPM > 30-300 | Tempo
‚îî‚îÄ‚îÄ HOLD > ON/OFF | Hold mode
Patch y Memoria
text
MEMORY
‚îú‚îÄ‚îÄ SAVE? > YES/NO | Save current patch
‚îú‚îÄ‚îÄ LOAD > A01 | Load preset (A01-H88)
‚îú‚îÄ‚îÄ NAME > LEAD1 | 8-char name (scroll)
‚îî‚îÄ‚îÄ COPY > 1->2 | Copy src->dst [web:6]
Global Avanzado
text
SYSTEM
‚îú‚îÄ‚îÄ TOUCH > LIGHT,NORM,HEAVY | Keyboard sensitivity
‚îú‚îÄ‚îÄ CURSOR > BLINK,OFF | Display cursor
‚îú‚îÄ‚îÄ CONTRAST > 0-15 | LCD contrast
‚îú‚îÄ‚îÄ DUMP > ALL,BANK | SysEx dump type
‚îî‚îÄ‚îÄ RESET > YES/NO | Factory reset [web:9]
Pantalla t√≠pica: "MIX DCO1=99 DCO2=50" o "ARPG UP RNG=3 BPM=120". Scroll con [PAGE] para ver pasos completos de envelopes (8 steps en CZ)  /// NO TODOS LOS PONDREMOS, PERO HAY ALGUNOS QUE HABR√Å QUE DESARROLLAR ALGO, TAMBI√âN FALTAN LOS CASOS COMO NUESTROS CONTROLES, LA ASIGNACION DE CC A CADA CONTROL,

los LCD mostraban valores de bancos v√≠a MSB (CC#0, 0-127) y LSB (CC#32, 0-127) para seleccionar presets m√°s all√° de 128, combinados con Program Change (PC 0-127). Estos se visualizaban abreviados como "BANK MSB=00 LSB=01 PC=05" o "BNK=1 PRG=16" en scroll.

Estructura MIDI Bank Select
text
BANK SELECT
‚îú‚îÄ‚îÄ MSB > 00-127 | Most Significant Byte (CC#0, coarse bank)
‚îú‚îÄ‚îÄ LSB > 00-127 | Least Significant Byte (CC#32, fine bank)
---

## üü° FASE 26: AUDITOR√çA DE ARQUITECTURA Y BUENAS PR√ÅCTICAS (MANTENIMIENTO)
*Objetivo: Mejorar la robustez t√©cnica, el rendimiento y la portabilidad del motor NEURONiK.*

### üõ†Ô∏è Tarea 26.1: Acceso a Par√°metros en el Hilo de Audio (DSP)
- [x] **Problema**: Zipper noise y overhead de at√≥micos en el bucle de proceso.
- [x] **Soluci√≥n**: Implementar `juce::SmoothedValue<float>` para todos los par√°metros del DSP.
- [x] **Acci√≥n**: A√±adidas rampas de suavizado (20-50ms) en todos los efectos globales y par√°metros de voz.

### üìú Tarea 26.2: Gesti√≥n de Identificadores ("Magic Strings")
- [x] **Problema**: Uso de literales de cadena para IDs de par√°metros es propenso a errores de compilaci√≥n indetectables.
- [x] **Soluci√≥n**: Centralizar IDs en un namespace `Params` con `static constexpr const char*`.
- [x] **Acci√≥n**: Refactorizados todos los IDs y APVTS a constantes est√°ticas de tiempo de compilaci√≥n.

### üèóÔ∏è Tarea 26.3: Portabilidad del Sistema CMake
- [x] **Problema**: Rutas hardcodeadas (e.g., `C:\JUCE`) rompen la compilaci√≥n en otros sistemas/entornos.
- [x] **Soluci√≥n**: Usar `find_package(JUCE CONFIG REQUIRED)` y permitir `JUCE_PATH` v√≠a entorno/CLI.
- [x] **Acci√≥n**: Eliminadas las rutas absolutas de `CMakeLists.txt` y `manage.ps1`. Implementada detecci√≥n din√°mica v√≠a `env:JUCE_PATH`.

### üìê Tarea 26.4: UI Din√°mica y Responsiva [COMPLETADO]
- [x] **Problema**: Layouts de tama√±o fijo dificultan el redimensionado y portabilidad de la UI.
- [x] **Soluci√≥n**: Implementada funcionalidad Zoom (0.5x - 3x) y soporte para Maximize en todas las ventanas.
- [x] **Acci√≥n**: Refactorizada la gesti√≥n de escalas y habilitado el bot√≥n de maximizar en Synth y Model Maker.

### üêß Tarea 26.5: Scripts Multiplataforma
- [ ] **Problema**: Flujo de compilaci√≥n limitado a Windows por `manage.ps1`.
- [ ] **Soluci√≥n**: Crear `manage.sh` (Bash) equivalente para macOS/Linux.
- [ ] **Acci√≥n**: Asegurar paridad de funcionalidades en los scripts de automatizaci√≥n.

---

## üü¢ FASE 27: OPTIMIZACI√ìN CR√çTICA (AUDITOR√çA P0) [COMPLETADO]
*Objetivo: Solucionar problemas graves de threading y rendimiento identificados en la auditor√≠a t√©cnica.*

- [x] **Tarea 27.1: Threading Libres de Bloqueos**:
    - [x] Eliminado `ScopedLock` del hilo de audio (`processBlock`).
    - [x] Implementado pool de 32 voces pre-reservadas con l√≠mite at√≥mico (`NEURONiKSynthesiser`).
- [x] **Tarea 27.2: Optimizaci√≥n del Resonador (DSP)**:
    - [x] Movido el c√°lculo masivo de arm√≥nicos fuera del bucle de samples (ahora se calcula una vez por bloque).
    - [x] Reducci√≥n masiva de carga de CPU en alta polifon√≠a.
- [x] **Tarea 27.3: Mapeo MIDI de Alto Rendimiento**:
    - [x] Sustituci√≥n de `std::map` por un array at√≥mico de 128 posiciones para acceso O(1) sin bloqueos.
- [x] **Tarea 27.4: Branding y Est√©tica Final**:
    - [x] Actualizaci√≥n de subt√≠tulos: "Enhanced Spectral Morphing Synthesizer".
    - [x] Integraci√≥n de iconos nativos (.ico) en los ejecutables de Windows.
    - [x] Refactorizaci√≥n de `ModulatedSlider` para seguridad de memoria en la UI.
- [x] **Tarea 27.5: Aproximaciones Trigonom√©tricas**:
    - [x] Reemplazo de `std::sin` en LFO por aproximaci√≥n parab√≥lica (Bhaskara I), ahorrando ciclos de reloj.

---

## üü¢ FASE 28: ARQUITECTURA HEXAGONAL Y MOTOR NEURONIK [COMPLETADO]
*Objetivo: Modernizar el n√∫cleo del sintetizador hacia una arquitectura extensible y solucionar errores de linkado cr√≠ticos.*

- [x] **Tarea 28.1: Abstracci√≥n del Motor de S√≠ntesis (Arquitectura Hexagonal)**:
    - [x] Implementaci√≥n de interfaces `IVoice` e `ISynthesisEngine` para desacoplar el DSP del framework JUCE.
    - [x] Creaci√≥n de `NeuronikEngine` como orquestador central de voces y efectos.
    - [x] Implementaci√≥n de `AdditiveVoice` cumpliendo el contrato de `IVoice`.
- [x] **Tarea 28.2: Sincronizaci√≥n de Par√°metros de Alto Rendimiento**:
    - [x] Centralizaci√≥n de la actualizaci√≥n de par√°metros v√≠a `synchronizeEngineParameters()` en cada bloque de audio.
    - [x] Gesti√≥n at√≥mica de polifon√≠a y estados del motor.
- [x] **Tarea 28.3: Resoluci√≥n de Errores de Build (Linker P0)**:
    - [x] Correcci√≥n de dependencias circulares y errores de linkado (`juce_CreateApplication`).
    - [x] Limpieza integral de c√≥digo legacy (`NEURONiKSynthesiser`, `ResonatorVoice` antiguo).
    - [x] Implementaci√≥n de carga de modelos espectrales compatible con la nueva arquitectura en `PresetManager`.
- [x] **Tarea 28.4: Estabilizaci√≥n del Audio Thread**:
    - [x] Asegurado "Zero Allocations" en el hilo de audio mediante pre-reserva de recursos.
    - [x] Implementaci√≥n de m√©todos `reset()` en todos los m√≥dulos DSP para evitar transitorios indeseados.

---

## üü¢ FASE 29: MOTOR NEUROTIK (RESONATOR BANK) [COMPLETADO]
*Objetivo: Implementar un segundo motor de s√≠ntesis basado en un banco de resonadores (Filtros BP) excitados por una fuente de ruido o impulsos.*

- [x] **Tarea 29.1: Arquitectura de NeurotikEngine**:
    - [x] Creaci√≥n de `NeurotikEngine` implementando `ISynthesisEngine`.
    - [x] Creaci√≥n de `NeurotikVoice` implementando `IVoice`.
- [x] **Tarea 29.2: Banco de Resonadores DSP**:
    - [x] Implementaci√≥n de un banco de 64 filtros de banda estrecha (Q alta) en `ResonatorBank`.
    - [x] L√≥gica de excitaci√≥n mediante fuente de ruido corregida en `NeurotikVoice`.
- [x] **Tarea 29.3: Conmutaci√≥n de Motores**:
    - [x] A√±adido par√°metro global `Engine Type` (NEURONiK / Neurotik) en `ParameterDefinitions`.
    - [x] Implementada l√≥gica de intercambio de motores en `NEURONiKProcessor`.
    - [x] A√±adido selector visual en el `ParameterPanel` (DASHBOARD).
- [x] **Tarea 29.4: Par√°metros Espec√≠ficos de Neurotik**:
    - [x] Implementados par√°metros de Excitaci√≥n de Ruido y Resonancia del banco.
    - [x] Sincronizaci√≥n completa con la UI existente.

---

## üü° FASE 30: EXPRESI√ìN Y OPTIMIZACI√ìN DEL MOTOR [EN PROGRESO]
*Objetivo: Refinar el rendimiento y la expresividad del sintetizador para uso profesional.*

- [x] **Tarea 30.1: SIMD Acceleration**: Optimizaci√≥n masiva de `ResonatorBank` y `Resonator` core usando instrucciones vectoriales SSE (intrinsics).
    - [x] Vectorizaci√≥n de 64 biquads en Neurotik.
    - [x] Vectorizaci√≥n de 64 osciladores con aproximaci√≥n parab√≥lica en Additive.
- [x] **Tarea 30.2: Excitaci√≥n Avanzada para Neurotik**:
    - [x] Implementada coloraci√≥n de ruido (One-pole filter).
    - [x] Implementada excitaci√≥n por impulsos (Pluck/Transients).
    - [x] A√±adidos controles UI dedicados en el panel Oscillator.
- [x] **Tarea 30.3: Soporte MPE (MIDI Polyphonic Expression)**:
    - [x] Implementada arquitectura de voces con seguimiento de canal MIDI.
    - [x] Soporte per-note para Pitch Bend (¬±48 semitones), Pressure y Timbre (CC74).
    - [x] Forwarding inteligente de mensajes MPE en los motores centrales.
- [x] **Tarea 30.4: Spectral Unison**: Implementado modo de un√≠sono que duplica y desafina las parciales para sonidos m√°s densos (128 parciales/filtros). A√±adido como destino en la matriz de modulaci√≥n.

---

## üü¢ FASE 31: REBRANDING A AXIONiK Y REFINAMIENTO UI [COMPLETADO]
*Objetivo: Evolucionar la identidad del sintetizador y pulir detalles cr√≠ticos de la interfaz.*

- [x] **Tarea 31.1: Rebranding a AXIONiK**:
    - [x] Actualizada la cabecera de la UI y los di√°logos de "About" y "Options".
    - [x] Mantenida la arquitectura dual: Motores NEURONiK y Neurotik bajo la marca AXIONiK.
- [x] **Tarea 31.2: Correcciones Visuales P0**:
    - [x] **ADSR Filter Envelope**: Corregido bug donde el visualizador no se animaba por falta de actualizaci√≥n de atomics en el procesador.
    - [x] **XY Pad (Neural Pad)**: Corregida la visualizaci√≥n del thumb y el feedback en tiempo real.
    - [x] **Men√∫ Standalone**: A√±adida opci√≥n "Exit" funcional en el men√∫ File (solo standalone).
- [x] **Tarea 31.3: Tuning de Neurotik**: Ajustados par√°metros por defecto (menos ruido, m√°s impulsos) para garantizar que el motor sea musical desde el primer disparo ("Out of the Box").

---

## üü¢ FASE 32: AUDITOR√çA T√âCNICA E IMPLEMENTACI√ìN P0 [COMPLETADO]
*Objetivo: Resolver debilidades cr√≠ticas en el hilo de audio y el sistema de modulaci√≥n identificadas en la auditor√≠a t√©cnica.*

- [x] **Tarea 32.1: MIDI Lock-Free (Double Buffering)**:
    - [x] Eliminado `juce::ScopedLock` (CriticalSection) de `processBlock` para evitar inversiones de prioridad y glitches.
    - [x] Implementado sistema de intercambio de buffers con atomics (`midiBufferReady` flagging).
- [x] **Tarea 32.2: Correcci√≥n de LFO (Block Processing)**:
    - [x] Corregido error grave donde el LFO avanzaba solo 1 muestra por cada bloque de audio (desfase 512x).
    - [x] Migraci√≥n a `processBlock(numSamples)` para un avance de fase coherente y eliminaci√≥n de "petardeos".
- [x] **Tarea 32.3: Sincronizaci√≥n de Modulaci√≥n**:
    - [x] Reordenado el render loop para procesar LFOs **antes** de aplicar la modulaci√≥n, eliminando la latencia de 1 bloque.
- [x] **Tarea 32.4: Auditor√≠a T√©cnica Exhaustiva**:
    - [x] Identificados **24 hallazgos** cr√≠ticos divididos en: Seguridad (P0), Estabilidad (P0), Eficiencia DSP (P1) y Arquitectura (P2).

---

## üü¢ FASE 33: MITIGACI√ìN DE AUDITOR√çA Y PRE-FORK NEUROTiK [COMPLETADO]
*Objetivo: Abordar los bloqueadores comerciales restantes antes de iniciar el nuevo desarrollo.*

- [x] **Tarea 33.1: Seguridad de At√≥micos en UI**:
    - [x] Eliminar `reinterpret_cast` peligrosos en `Properties`.
    - [x] Migrar a sistema de direccionamiento por √≠ndices en array de modulaci√≥n del Processor.
- [x] **Tarea 33.2: Validaci√≥n de NaN/Infinity (Audio Armor)**:
    - [x] Implementar macro `VALIDATE_AUDIO_PARAM` en Resonator, Filter y LFO.
    - [x] Sanitizaci√≥n forzada de los buffers de salida de las voces para evitar mutes en el DAW.
- [ ] **Tarea 33.3: Portabilidad ARM64 (Apple Silicon)**:
    - [ ] Crear `PlatformDetect.h` para paths condicionales SSE vs NEON vs Scalar.
- [x] **Tarea 33.4: Preparaci√≥n de IDs para Fork**:
    - [x] Actualizaci√≥n de codes de fabricante y producto en `CMakeLists.txt` para el nuevo fork.
- [x] **Tarea 33.5: Robustez de Par√°metros**:
    - [x] A√±adir validaciones `nullptr` y `jassert` en el acceso a par√°metros APVTS desde la UI.

---

## üü¢ FASE 34: OVERHAUL ARQUITECT√ìNICO Y SEGURIDAD TOTAL [COMPLETADO]
*Objetivo: Migrar a una arquitectura desacoplada y eliminar todos los riesgos de concurrencia en el hilo de audio.*

- [x] **Tarea 34.1: Arquitectura Hexagonal Profunda**:
    - [x] Desacoplamiento total del DSP mediante interfaces `IVoice` e `ISynthesisEngine`.
    - [x] Refactorizaci√≥n de `AdditiveVoice` y `NeurotikVoice` para cumplimiento estricto de contrato.
- [x] **Tarea 34.2: MIDI Lock-Free FIFO**:
    - [x] Eliminada la `juce::CriticalSection` de la inyecci√≥n de notas.
    - [x] Implementado buffer SPSC circular con `juce::AbstractFifo` para latencia cero y estabilidad real-time.
- [x] **Tarea 34.3: Sistema de Comandos As√≠ncronos (SPSC)**:
    - [x] Cola de comandos para tareas pesadas (Carga de modelos espectrales).
    - [x] Eliminaci√≥n de race conditions durante el cambio de presets/patches.

---

---

## üü¢ FASE 35: ESTRATEGIA DE LA TR√çADA AXIONiK [EN PROGRESO]
*Objetivo: Consolidar AXIONiK como el motor principal ("El Maestro") antes de derivar sus variantes especializadas.*

### üõ†Ô∏è Sub-fase 35.1: Pulido Final de AXIONiK (95% Done)
- [x] **Robustez Total**: Integraci√≥n de "Audio Armor" y manejo de at√≥micos en el motor y la UI (Completado en Fases 33-36).
- [ ] **Refinamiento del Motor Neurotik**: Ajuste fino de las envolventes de excitaci√≥n y respuesta de resonadores (Falta balance final).
- [x] **Sistema de Temas Din√°micos**: Implementada arquitectura de `ThemeManager` con paletas intercambiables para AXIONiK, NEURONiK y NEUROTiK.

### üìê Visi√≥n de Producto: Los Tres Hermanos
1.  **AXIONiK**: El buque insignia. Incluye ambos motores (Aditivo + Resonadores), matriz de modulaci√≥n completa y efectos.
2.  **NEURONiK**: Especializado en s√≠ntesis aditiva pura. Interfaz simplificada y optimizada para res√≠ntesis.
3.  **NEUROTiK**: Especializado en modelado f√≠sico y resonadores. Enfoque en texturas org√°nicas y percusivas.

---

## üü¢ FASE 36: IMPLEMENTACI√ìN DEL SISTEMA DE TEMAS Y UI RECONFIGURABLE [COMPLETADO]
*Objetivo: Preparar la interfaz para el branching de productos mediante skins y layouts condicionales.*

- [x] **ThemeEngine**: Clase central `ThemeManager` para la gesti√≥n de paletas (Cian para AXIONiK, Rojo para NEURONiK, Ambar para NEUROTiK).
- [x] **UI Refactoring**: Adaptaci√≥n de todos los componentes (`Knobs`, `Buttons`, `Panels`, `Visualizers`) para usar el sistema de temas din√°mico.
- [ ] **Conditional UI**: Capacidad de ocultar/mostrar paneles seg√∫n el `ProductType` para las versiones especializadas (Pr√≥ximo paso).
